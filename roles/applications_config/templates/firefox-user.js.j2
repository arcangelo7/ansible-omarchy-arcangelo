// Firefox user preferences
// This file contains custom preferences that override Firefox defaults
// Documentation: https://kb.mozillazine.org/User.js_file
//
// To find preference names: about:config in Firefox
// To add more preferences: edit this file and re-run Ansible

// =============================================================================
// PRIVACY & SECURITY
// =============================================================================

{% if firefox_content_blocking is defined %}
// Enable strict content blocking (tracking protection)
user_pref("browser.contentblocking.category", "{{ firefox_content_blocking }}");
{% endif %}

{% if firefox_formfill_enable is defined %}
// Disable form autofill
user_pref("browser.formfill.enable", {{ firefox_formfill_enable | lower }});
{% endif %}

{% if firefox_remember_signons is defined %}
// Disable password manager (if using external password manager)
user_pref("signon.rememberSignons", {{ firefox_remember_signons | lower }});
{% endif %}

{% if firefox_doh_mode is defined %}
// Enable DNS over HTTPS (DoH)
user_pref("network.trr.mode", {{ firefox_doh_mode }});  // 0=off, 2=TRR first, 3=TRR only
{% endif %}

{% if firefox_telemetry_enabled is defined %}
// Disable telemetry
user_pref("toolkit.telemetry.enabled", {{ firefox_telemetry_enabled | lower }});
{% endif %}
{% if firefox_healthreport_enabled is defined %}
user_pref("datareporting.healthreport.uploadEnabled", {{ firefox_healthreport_enabled | lower }});
{% endif %}

// =============================================================================
// UI & BEHAVIOR
// =============================================================================

{% if firefox_ctrl_tab_recently_used is defined %}
// Sort tabs by recently used when using Ctrl+Tab
user_pref("browser.ctrlTab.sortByRecentlyUsed", {{ firefox_ctrl_tab_recently_used | lower }});
{% endif %}

{% if firefox_show_topsites is defined %}
// Disable top sites on new tab page
user_pref("browser.newtabpage.activity-stream.feeds.topsites", {{ firefox_show_topsites | lower }});
{% endif %}

{% if firefox_show_pocket is defined %}
// Disable pocket recommendations
user_pref("browser.newtabpage.activity-stream.feeds.section.topstories", {{ firefox_show_pocket | lower }});
{% endif %}

{% if firefox_userchrome_enabled is defined %}
// Enable userChrome.css support (for UI customization)
user_pref("toolkit.legacyUserProfileCustomizations.stylesheets", {{ firefox_userchrome_enabled | lower }});
{% endif %}

// =============================================================================
// PERFORMANCE
// =============================================================================

{% if firefox_hw_acceleration is defined %}
// Enable hardware acceleration (default: true)
user_pref("layers.acceleration.force-enabled", {{ firefox_hw_acceleration | lower }});
{% endif %}

{% if firefox_process_count is defined %}
// Increase content process limit (more RAM, better performance)
user_pref("dom.ipc.processCount", {{ firefox_process_count }});
{% endif %}

// =============================================================================
// DOWNLOADS
// =============================================================================

{% if firefox_auto_download_dir is defined %}
// Always ask where to save files
user_pref("browser.download.useDownloadDir", {{ firefox_auto_download_dir | lower }});
{% endif %}
