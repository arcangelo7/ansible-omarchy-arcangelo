---
- name: Remove bloatware packages
  community.general.pacman:
    name: "{{ item }}"
    state: absent
  loop: "{{ bloatware_packages }}"
  when: bloatware_packages is defined and bloatware_packages | length > 0
  become: yes
  ignore_errors: yes
  register: bloatware_removal_result

- name: Show bloatware removal results
  debug:
    msg: "Package {{ item.item }} - Status: {{ 'Removed' if item.changed else 'Not present or error' }}"
  loop: "{{ bloatware_removal_result.results }}"
  when: bloatware_removal_result is defined

- name: Remove 1Password configuration files
  ansible.builtin.file:
    path: "{{ item }}"
    state: absent
  loop: "{{ onepassword_config_files }}"
  when: onepassword_config_files is defined and onepassword_config_files | length > 0
  ignore_errors: yes
  register: onepassword_files_removal_result

- name: Show 1Password files removal results
  debug:
    msg: "File {{ item.item }} - Status: {{ 'Removed' if item.changed else 'Not present or error' }}"
  loop: "{{ onepassword_files_removal_result.results }}"
  when: onepassword_files_removal_result is defined

- name: Remove Basecamp web app files
  ansible.builtin.file:
    path: "{{ item }}"
    state: absent
  loop: "{{ basecamp_webapp_files }}"
  when: basecamp_webapp_files is defined and basecamp_webapp_files | length > 0
  ignore_errors: yes
  register: basecamp_files_removal_result

- name: Show Basecamp files removal results
  debug:
    msg: "File {{ item.item }} - Status: {{ 'Removed' if item.changed else 'Not present or error' }}"
  loop: "{{ basecamp_files_removal_result.results }}"
  when: basecamp_files_removal_result is defined

- name: Remove Google Contacts web app files
  ansible.builtin.file:
    path: "{{ item }}"
    state: absent
  loop: "{{ google_contacts_webapp_files }}"
  when: google_contacts_webapp_files is defined and google_contacts_webapp_files | length > 0
  ignore_errors: yes
  register: google_contacts_files_removal_result

- name: Show Google Contacts files removal results
  debug:
    msg: "File {{ item.item }} - Status: {{ 'Removed' if item.changed else 'Not present or error' }}"
  loop: "{{ google_contacts_files_removal_result.results }}"
  when: google_contacts_files_removal_result is defined

- name: Remove Google Messages web app files
  ansible.builtin.file:
    path: "{{ item }}"
    state: absent
  loop: "{{ google_messages_webapp_files }}"
  when: google_messages_webapp_files is defined and google_messages_webapp_files | length > 0
  ignore_errors: yes
  register: google_messages_files_removal_result

- name: Show Google Messages files removal results
  debug:
    msg: "File {{ item.item }} - Status: {{ 'Removed' if item.changed else 'Not present or error' }}"
  loop: "{{ google_messages_files_removal_result.results }}"
  when: google_messages_files_removal_result is defined

- name: Remove Google Photos web app files
  ansible.builtin.file:
    path: "{{ item }}"
    state: absent
  loop: "{{ google_photos_webapp_files }}"
  when: google_photos_webapp_files is defined and google_photos_webapp_files | length > 0
  ignore_errors: yes
  register: google_photos_files_removal_result

- name: Show Google Photos files removal results
  debug:
    msg: "File {{ item.item }} - Status: {{ 'Removed' if item.changed else 'Not present or error' }}"
  loop: "{{ google_photos_files_removal_result.results }}"
  when: google_photos_files_removal_result is defined

- name: Remove HEY web app files
  ansible.builtin.file:
    path: "{{ item }}"
    state: absent
  loop: "{{ hey_webapp_files }}"
  when: hey_webapp_files is defined and hey_webapp_files | length > 0
  ignore_errors: yes
  register: hey_files_removal_result

- name: Show HEY files removal results
  debug:
    msg: "File {{ item.item }} - Status: {{ 'Removed' if item.changed else 'Not present or error' }}"
  loop: "{{ hey_files_removal_result.results }}"
  when: hey_files_removal_result is defined

- name: Remove Signal configuration files
  ansible.builtin.file:
    path: "{{ item }}"
    state: absent
  loop: "{{ signal_config_files }}"
  when: signal_config_files is defined and signal_config_files | length > 0
  ignore_errors: yes
  register: signal_files_removal_result

- name: Show Signal files removal results
  debug:
    msg: "File {{ item.item }} - Status: {{ 'Removed' if item.changed else 'Not present or error' }}"
  loop: "{{ signal_files_removal_result.results }}"
  when: signal_files_removal_result is defined

- name: Remove ChatGPT web app files
  ansible.builtin.file:
    path: "{{ item }}"
    state: absent
  loop: "{{ chatgpt_webapp_files }}"
  when: chatgpt_webapp_files is defined and chatgpt_webapp_files | length > 0
  ignore_errors: yes
  register: chatgpt_files_removal_result

- name: Show ChatGPT files removal results
  debug:
    msg: "File {{ item.item }} - Status: {{ 'Removed' if item.changed else 'Not present or error' }}"
  loop: "{{ chatgpt_files_removal_result.results }}"
  when: chatgpt_files_removal_result is defined

- name: Remove Typora configuration files
  ansible.builtin.file:
    path: "{{ item }}"
    state: absent
  loop: "{{ typora_config_files }}"
  when: typora_config_files is defined and typora_config_files | length > 0
  ignore_errors: yes
  register: typora_files_removal_result

- name: Show Typora files removal results
  debug:
    msg: "File {{ item.item }} - Status: {{ 'Removed' if item.changed else 'Not present or error' }}"
  loop: "{{ typora_files_removal_result.results }}"
  when: typora_files_removal_result is defined
